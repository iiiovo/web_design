<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- PAGE settings -->
  <link rel="icon" href="https://templates.pingendo.com/assets/Pingendo_favicon.ico">
  <title>Index</title>
  <!-- CSS dependencies -->
  <link rel="stylesheet" href="../css/all.css" type="text/css">
  <link rel="stylesheet" href="../css/wireframe.css">
</head>

<body>
  <div class="bg-info collapse show" id="navbarHeader">
    <div class="container">
      <div class="row">
        <div class="py-4 col-md-4">
          <h1>Login</h1>
           <a href="../user/login.html"><h5 class="text-primary">Click here to login</h5></a>
        </div>
        <div class="py-4 col-md-4">
          <a href="xianzhi.html">
            <h1 class="text-primary">Idle Swapping</h1>
            <h5 class="text-primary">Do you want to know more? Click here</h5>
          </a>
        </div>
        <div class="col-md-4  py-4">
          <h1>About us</h1>
          <ul class="list-unstyled">
            <li class="shadow-none">
              <a href="#" class="text-primary shadow-lg">Follow on Weibo</a>
            </li>
            <li class="">
              <a href="#" class="text-primary">Like on Wechat</a>
            </li>
            <li class="">
              <a href="#" class="text-primary">Email me</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <div class="navbar navbar-dark bg-dark">
    <div class="container d-flex justify-content-between">
      <a href="#" class="navbar-brand d-flex align-items-center"><strong>House-hunting</strong> </a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarHeader" aria-expanded="true"> <span class="navbar-toggler-icon"></span> </button>
    </div>
  </div>
  <div class="py-5 text-center text-md-right h-75" style="background-image: url('https://static.pingendo.com/cover-bubble-dark.svg'); background-position: right bottom; background-size: cover; background-repeat: repeat; background-attachment: fixed;">
    <div class="container">
      <div class="row">
        <div class="p-5 mx-auto mx-md-0 ml-md-auto col-10 col-md-9">
          <h3 class="display-3">I feel the charm</h3>
          <p class="mb-3 lead">Of existence in this spot, which was created for the bliss of souls like mine. I am so happy, my dear friend, so absorbed in the exquisite sense of mere tranquil existence, that I neglect my talents.</p>
          <form class="form-inline d-flex justify-content-end">
            <div class="input-group"> <input type="email" class="form-control" placeholder="Your email" id="formcover1">
              <div class="input-group-append"> <button class="btn btn-primary" type="button">Subscribe</button> </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
  <div class="py-1">
    <div class="container">
      <div class="row">
        <div class="col-md-12"></div>
        <div class="col-md-6"></div>
        <div class="col-md-6"></div>
        <div class="col-md-6"></div>
        <div class="col-md-6"></div>
      </div>
    </div>
  </div>
  <div class="py-4 bg-light">
    <div class="container">
      <div class="row">
        <div class="col-md-4 p-3">
          <div class="card box-shadow"> <a data-toggle="modal" data-target=".white">
              <img class="card-img-top" src="https://pingendo.com/assets/photos/wireframe/photo-1.jpg" style="	border-top-left-radius: 50px;	border-top-right-radius: 50px;	border-bottom-left-radius: 50px;	border-bottom-right-radius: 50px;"></a>
            <div class="card-body">
              <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>
              <div class="d-flex justify-content-between align-items-center">
                <div class="btn-group">
                  <button type="button" class="btn btn-sm btn-outline-secondary">View</button>
                  <button type="button" class="btn btn-sm btn-outline-secondary">Edit</button>
                </div> <small class="text-muted">9 mins</small>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-4 p-3">
          <div class="card box-shadow"> <a data-toggle="modal" data-target=".white" href="">
              <img class="card-img-top" src="https://pingendo.com/assets/photos/wireframe/photo-1.jpg"></a>
            <div class="card-body">
              <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>
              <div class="d-flex justify-content-between align-items-center">
                <div class="btn-group">
                  <button type="button" class="btn btn-sm btn-outline-secondary">View</button>
                  <button type="button" class="btn btn-sm btn-outline-secondary">Edit</button>
                </div> <small class="text-muted">9 mins</small>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-4 p-3">
          <div class="card box-shadow"> <a data-toggle="modal" data-target=".white" href="">
              <img class="card-img-top" src="https://pingendo.com/assets/photos/wireframe/photo-1.jpg"></a>
            <div class="card-body">
              <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>
              <div class="d-flex justify-content-between align-items-center">
                <div class="btn-group">
                  <button type="button" class="btn btn-sm btn-outline-secondary">View</button>
                  <button type="button" class="btn btn-sm btn-outline-secondary">Edit</button>
                </div> <small class="text-muted">9 mins</small>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-4 p-3">
          <div class="card box-shadow"> <a data-toggle="modal" data-target=".white" href="">
              <img class="card-img-top" src="https://pingendo.com/assets/photos/wireframe/photo-1.jpg"></a>
            <div class="card-body">
              <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>
              <div class="d-flex justify-content-between align-items-center">
                <div class="btn-group">
                  <button type="button" class="btn btn-sm btn-outline-secondary">View</button>
                  <button type="button" class="btn btn-sm btn-outline-secondary">Edit</button>
                </div> <small class="text-muted">9 mins</small>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-4 p-3">
          <div class="card box-shadow"> <a data-toggle="modal" data-target=".white" href="">
              <img class="card-img-top" src="https://pingendo.com/assets/photos/wireframe/photo-1.jpg"></a>
            <div class="card-body">
              <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>
              <div class="d-flex justify-content-between align-items-center">
                <div class="btn-group">
                  <button type="button" class="btn btn-sm btn-outline-secondary">View</button>
                  <button type="button" class="btn btn-sm btn-outline-secondary">Edit</button>
                </div> <small class="text-muted">9 mins</small>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-4 p-3">
          <div class="card box-shadow"> <a data-toggle="modal" data-target=".white" href="">
              <img class="card-img-top" src="https://pingendo.com/assets/photos/wireframe/photo-1.jpg"></a>
            <div class="card-body">
              <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>
              <div class="d-flex justify-content-between align-items-center">
                <div class="btn-group">
                  <button type="button" class="btn btn-sm btn-outline-secondary">View</button>
                  <button type="button" class="btn btn-sm btn-outline-secondary">Edit</button>
                </div> <small class="text-muted">9 mins</small>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-4 p-3">
          <div class="card box-shadow"> <a data-toggle="modal" data-target=".white" href="">
              <img class="card-img-top" src="https://pingendo.com/assets/photos/wireframe/photo-1.jpg"></a>
            <div class="card-body">
              <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>
              <div class="d-flex justify-content-between align-items-center">
                <div class="btn-group">
                  <button type="button" class="btn btn-sm btn-outline-secondary">View</button>
                  <button type="button" class="btn btn-sm btn-outline-secondary">Edit</button>
                </div> <small class="text-muted">9 mins</small>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-4 p-3">
          <div class="card box-shadow"> <a data-toggle="modal" data-target=".white" href="">
              <img class="card-img-top" src="https://pingendo.com/assets/photos/wireframe/photo-1.jpg"></a>
            <div class="card-body">
              <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>
              <div class="d-flex justify-content-between align-items-center">
                <div class="btn-group">
                  <button type="button" class="btn btn-sm btn-outline-secondary">View</button>
                  <button type="button" class="btn btn-sm btn-outline-secondary">Edit</button>
                </div> <small class="text-muted">9 mins</small>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-4 p-3">
          <div class="card box-shadow"> <a data-toggle="modal" data-target=".white" href="">
              <img class="card-img-top" src="https://pingendo.com/assets/photos/wireframe/photo-1.jpg"></a>
            <div class="card-body">
              <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>
              <div class="d-flex justify-content-between align-items-center">
                <div class="btn-group">
                  <button type="button" class="btn btn-sm btn-outline-secondary">View</button>
                  <button type="button" class="btn btn-sm btn-outline-secondary">Edit</button>
                </div> <small class="text-muted">9 mins</small>
              </div>
            </div>
          </div>
        </div>
      </div><a data-toggle="modal" data-target=".white" href="">
      </a>
    </div><a data-toggle="modal" data-target=".white" href="">
    </a>
  </div><a data-toggle="modal" data-target=".white" href="">
  </a>
  <footer class="text-muted py-5"><a data-toggle="modal" data-target=".white" href="">
    </a>
    <div class="modal fade white">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header bg-light">
            <h5 class="modal-title"><b>White</b> - Consultant</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">×</span> </button>
          </div>
          <div class="modal-body bg-light w-100 h-50">
            <div class="row">
              <div class="col-md-12">
                <div class="carousel slide mx-2" data-ride="carousel" id="carousel">
                  <div class="carousel-inner">
                    <div class="carousel-item"> <img class="d-block img-fluid w-100" src="https://static.pingendo.com/cover-bubble-dark.svg">
                    </div>
                    <div class="carousel-item active"> <img class="d-block img-fluid w-100" src="https://static.pingendo.com/cover-bubble-light.svg">
                    </div>
                    <div class="carousel-item"> <img class="d-block img-fluid w-100" src="https://static.pingendo.com/cover-moon.svg">
                    </div>
                  </div> <a class="carousel-control-prev" href="#carousel" role="button" data-slide="prev"> <span class="carousel-control-prev-icon"></span> <span class="sr-only">Previous</span> </a> <a class="carousel-control-next" href="#carousel" role="button" data-slide="next"> <span class="carousel-control-next-icon"></span> <span class="sr-only">Next</span> </a>
                </div>
              </div>
            </div>
            <div class="container h-50">
              <div class="row h-75">
                <div class="col-md-12 col-lg-12 mt-1">
                  <div class="row">
                  </div>
                  <div class="card text-center">
                    <div class="card-header">
                      <ul class="nav nav-tabs card-header-tabs">
                        <li class="nav-item">
                          <a class="nav-link active show" data-toggle="tab" data-target="#tabone">Explicate</a>
                        </li>
                        <li class="nav-item">
                          <a class="nav-link" data-toggle="tab" data-target="#tabthree">Contact</a>
                        </li>
                        <li class="nav-item">
                          <a class="btn btn-primary px-3 isclick" href="#"><i class="collect far fa-star fa-fw fa-1x py-1"></i></a>
                        </li>
                      </ul>
                    </div>
                    <div class="card-body h-75">
                      <div class="tab-content mt-2">
                        <div class="tab-pane fade active show" id="tabone" role="tabpanel">
                          <p class="text-justify">这里我先假装我正在借助这个网站出租房子，我先要大概说明房子地点，能住几个人，房子的条件怎么样，有无无线，电视，空调，做饭的设施，需不需要和别人一起住以及大概的价格，这里大概的格式还没想好的</p>
                        </div>
                        <div class="tab-pane fade" id="tabthree" role="tabpanel">
                          <p class="">联系方式，弹出来的二维码，这样比较便利，做不到的话直接写微信号或者扣扣号也是很好的</p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

                  
  </footer>
  <script src="https://cdn.staticfile.org/jquery/2.2.4/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
  <script src="https://cdn.staticfile.org/axios/0.18.0/axios.min.js"></script>
  <script type="text/javascript">
  //TO DO:点击收藏、取消收藏；将收藏的模块传至后端
 //-------------获当前登陆的用户id和收藏状态-----------------//
    $(document).ready(function(){ 
       var user_id;
       var house_collect_status;
       // 为当前用户创建请求
        axios.get('user_id=?')
        .then(function (response) {
            console.log(response);
            if(response.data.code === 1 ){
               //已经登录，对应服务端获取数据 
              const urlModule = require('url');
              let params = urlModule.parse(request.url, true).query;//解析数据获得Json对象
              let user_id = params.key;//通过参数名称获得参数值
              let house_collect_status = params.key;//通过参数名称获得参数值
            }
            else{
            alert("Ooh,请先登录再操作哦");
            //或者在前端加一个弹框model
             //此时不跳转，允许用户不登录查看，但不允许不登录进行收藏操作
          }
      })
      .catch(function (error) {
            console.log(error);
      });
  });

//-----------------------房源收藏----------------------//
$(".collect").click(function(){
        if (user_id == null) {
            //alert("Ooh,请先登录再操作哦");
            //若用户未登录，不允许进行收藏操作，跳转至登录界面
             $("#failCollect").show();
             setTimeout(function(){
               $("#failCollect").hide();
               },1000);
             location.href = '../user/login.html';
        }else{
           if(house_collect_status == 0 ){
            //数据库中没有收藏,点击收藏操作
            $('.collect').removeClass('far').addClass('fas')
            //更新数据库收藏状态,变为已收藏
             axios.post('/qiju/house/index', {
              house_collect_status = 1,
              house_id = $(this).attr("id"),
              user_id = user_id
            })
            .then(function(response) {
              console.log(response);
              if(response.data.code === 1) alert('收藏成功');
              else alter('收藏失败');
            })
            .catch(function(error) {
              console.log(error);
            });
           }
           else{
            //数据库存在收藏,点击删除收藏操作
            $('.collect').removeClass('far').addClass('fas')
            //更新数据库收藏状态，变为未收藏
            axios.post('/qiju/house/index', {
              collect_status = 0,
              house_id = $(this).attr("id"),
              user_id = user_id
            })
            .then(function(response) {
              console.log(response);
            })
            .catch(function(error) {
              console.log(error);
            });
           }
        }
       });
  /*效果演示代码
   var isclick = 0;
   $(".isclick").click(function(){
      isclick++;
      if(isclick%2 == 0){
        $('.collect').removeClass('fas').addClass('far')
      }
      else{
        $('.collect').removeClass('far').addClass('fas')
      }
   });*/
  </script>

  <script type="text/javascript">
  //TO DO:搜索框通过关键字筛选房源

  </script>

  <script type="text/javascript">
  //TO DO:通过勾选复选框筛选房源(价格/地区)

  </script>

  <script type="text/javascript">
  //TO DO:通过获取房屋出租状态下架房源

  </script>
</body>

</html>