<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- PAGE settings -->
  <link rel="icon" href="https://templates.pingendo.com/assets/Pingendo_favicon.ico">
  <link rel="stylesheet" href="../css/all.css" type="text/css">
  <title>Index</title>
  <!-- CSS dependencies -->
  <!--<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" type="text/css">-->
  <link rel="stylesheet" href="../css/wireframe.css">
  <link rel="stylesheet" href="../scss/theme.css">
</head>

<body>
  <div class="collapse in" style="background-image: url(../img/dynamic-style.png);" id="navbarHeader">
    <div class="container">
      <div class="row">
        <div class="py-4 col-md-4">
          <a href="../user/login.html">
            <h1>Login</h1>
            <h5>Click here to login</h5>
          </a>
        </div>
        <div class="py-4 col-md-4">
          <a href="xianzhi.html">
            <h1>Idle Swapping</h1>
            <h5>Do you want to know more? Click here</h5>
          </a>
        </div>
        <div class="col-md-4  py-4">
          <h1>About us</h1>
          <ul class="list-unstyled">
            <li class="shadow-none">
              <a href="#">Follow on Weibo</a>
            </li>
            <li class="">
              <a href="#">Like on Wechat</a>
            </li>
            <li class="">
              <a href="#">Email me</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <div class="text-center text-md-right h-75 py-0" style="background-image: url(&quot;../img/living-room-5.jpg&quot;); background-position: right bottom; background-size: cover; background-repeat: repeat; background-attachment: fixed;">
    <div class="navbar">
      <div class="container d-flex justify-content-between">
        <a href="#" class="navbar-brand d-flex align-items-center"> <i class="d-block far fa-lg fa-building text-body"></i> <strong class="">Qiju</strong> </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarHeader" aria-expanded="true">
          <img url="" src="../gif/364.gif" width="50"> </button>
      </div>
    </div>
  </div>
  <div class="py-4" style="background-image: url(../img/dynamic-style.png);">
    <div class="container ">
      <div class="row">
        <div class="col-md-12">
          <h1 class="bg-secondary pl-2 pb-1">猜你喜欢</h1>
        </div>
        <div class="col-md-4 p-3">
          <div class="card box-shadow"> <a data-toggle="modal" data-target=".white">
              <img class="card-img-top" src="../img/living-room-1.jpg" height="220px">
            </a>
            <div class="card-body pt-1 pb-1">
              <h5 class="">荣昌区-学院路-万隆小区-整套房子出租-离学校非常近！</h5>
              <i class="fa fa-jpy d-inline" aria-hidden="true"> 300/月（可砍价）</i>
              <div class="align-items-center d-flex mb-1"><button type="button" class="fa bg-secondary mr-5 mt-2 py-1 px-1"> Know more</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; <button type="button" class="fa fa-star-o py-1 px-2 bg-secondary ml-4 mt-2"></button>
              </div>
            </div>
          </div>
        </div>
       <div class="col-md-4 p-3">
          <div class="card box-shadow"> <a data-toggle="modal" data-target=".white">
              <img class="card-img-top" src="../img/living-room-2.jpg" height="220px">
            </a>
            <div class="card-body pt-1 pb-1">
              <h5 contenteditable="true" class="">荣昌区-学院路-万隆小区-整套房子出租-离学校非常近！</h5>
              <i class="fa fa-jpy d-inline" aria-hidden="true"> 300/月（可砍价）</i>
              <div class="align-items-center d-flex mb-1" style=""><button type="button" class="fa bg-secondary mr-5 mt-2 py-1 px-1"> Know more</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; <button type="button" class="fa fa-star-o py-1 px-2 bg-secondary ml-4 mt-2"></button>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-4 p-3" style="">
          <div class="card box-shadow"> <a data-toggle="modal" data-target=".white">
              <img class="card-img-top" src="../img/living-room-3.jpg" height="220px">
            </a>
            <div class="card-body pt-1 pb-1">
              <h5 contenteditable="true" class="">荣昌区-学院路-万隆小区-整套房子出租-离学校非常近！</h5>
              <i class="fa fa-jpy d-inline" aria-hidden="true"> 300/月（可砍价）</i>
              <div class="align-items-center d-flex mb-1" style=""><button type="button" class="fa bg-secondary mr-5 mt-2 py-1 px-1"> Know more</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; <button type="button" class="fa fa-star-o py-1 px-2 bg-secondary ml-4 mt-2"></button>
              </div>
            </div>
          </div>
        </div>

        <div class="col-md-4 p-3" style="">
          <div class="card box-shadow"> <a data-toggle="modal" data-target=".white">
              <img class="card-img-top" src="../img/living-room-4.jpg" height="220px">
            </a>
            <div class="card-body pt-1 pb-1">
              <h5 contenteditable="true" class="">荣昌区-学院路-万隆小区-整套房子出租-离学校非常近！</h5>
              <i class="fa fa-jpy d-inline" aria-hidden="true"> 300/月（可砍价）</i>
              <div class="align-items-center d-flex mb-1" style=""><button type="button" class="fa bg-secondary mr-5 mt-2 py-1 px-1"> Know more</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; <button type="button" class="fa fa-star-o py-1 px-2 bg-secondary ml-4 mt-2"></button>
              </div>
            </div>
          </div>
        </div>

       <div class="col-md-4 p-3" style="">
          <div class="card box-shadow"> <a data-toggle="modal" data-target=".white">
              <img class="card-img-top" src="../img/living-room-5.jpg" height="220px">
            </a>
            <div class="card-body pt-1 pb-1">
              <h5 contenteditable="true" class="">荣昌区-学院路-万隆小区-整套房子出租-离学校非常近！</h5>
              <i class="fa fa-jpy d-inline" aria-hidden="true"> 300/月（可砍价）</i>
              <div class="align-items-center d-flex mb-1" style=""><button type="button" class="fa bg-secondary mr-5 mt-2 py-1 px-1"> Know more</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; <button type="button" class="fa fa-star-o py-1 px-2 bg-secondary ml-4 mt-2"></button>
              </div>
            </div>
          </div>
        </div>

        <div class="col-md-4 p-3" style="">
          <div class="card box-shadow"> <a data-toggle="modal" data-target=".white">
              <img class="card-img-top" src="../img/living-room-6.jpg" height="220px">
            </a>
            <div class="card-body pt-1 pb-1">
              <h5 contenteditable="true" class="">荣昌区-学院路-万隆小区-整套房子出租-离学校非常近！</h5>
              <i class="fa fa-jpy d-inline" aria-hidden="true"> 300/月（可砍价）</i>
              <div class="align-items-center d-flex mb-1" style=""><button type="button" class="fa bg-secondary mr-5 mt-2 py-1 px-1"> Know more</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; <button type="button" class="fa fa-star-o py-1 px-2 bg-secondary ml-4 mt-2"></button>
              </div>
            </div>
          </div>
        </div>
      </div><a data-toggle="modal" data-target=".white" href="">
      </a>
    </div><a data-toggle="modal" data-target=".white" href="">
    </a>
    <div class="row ml-5">
      <div class="col-md-3" style="left:38%">
        <ul class="pagination text-center">
          <li class="page-item"> <a class="page-link" href="#"> <span>«</span></a> </li>
          <li class="page-item active"> <a class="page-link" href="#">1</a> </li>
          <li class="page-item"> <a class="page-link" href="#">2</a> </li>
          <li class="page-item"> <a class="page-link" href="#">3</a> </li>
          <li class="page-item"> <a class="page-link" href="#">4</a> </li>
          <li class="page-item"> <a class="page-link" href="#"> <span>»</span></a> </li>
        </ul>
      </div>
    </div>
  </div>
  <div class="py-4 bg-light" style="background-image: url(../img/dynamic-style.png);">
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <h1 class="bg-secondary pl-2 pb-1">精品推荐</h1>
        </div>

        <div class="col-md-4 p-3" style="">
          <div class="card box-shadow"> <a data-toggle="modal" data-target=".white">
              <img class="card-img-top" src="../img/living-room-7.jpg" height="220px">
            </a>
            <div class="card-body pt-1 pb-1">
              <h5 contenteditable="true" class="">荣昌区-学院路-万隆小区-整套房子出租-离学校非常近！</h5>
              <i class="fa fa-jpy d-inline" aria-hidden="true"> 300/月（可砍价）</i>
              <div class="align-items-center d-flex mb-1" style=""><button type="button" class="fa bg-secondary mr-5 mt-2 py-1 px-1"> Know more</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; <button type="button" class="fa fa-star-o py-1 px-2 bg-secondary ml-4 mt-2"></button>
              </div>
            </div>
          </div>
        </div>
<div class="col-md-4 p-3" style="">
          <div class="card box-shadow"> <a data-toggle="modal" data-target=".white">
              <img class="card-img-top" src="../img/living-room-8.jpg" height="220px">
            </a>
            <div class="card-body pt-1 pb-1">
              <h5 contenteditable="true" class="">荣昌区-学院路-万隆小区-整套房子出租-离学校非常近！</h5>
              <i class="fa fa-jpy d-inline" aria-hidden="true"> 300/月（可砍价）</i>
              <div class="align-items-center d-flex mb-1" style=""><button type="button" class="fa bg-secondary mr-5 mt-2 py-1 px-1"> Know more</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; <button type="button" class="fa fa-star-o py-1 px-2 bg-secondary ml-4 mt-2"></button>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-4 p-3" style="">
          <div class="card box-shadow"> <a data-toggle="modal" data-target=".white">
              <img class="card-img-top" src="../img/living-room-9.jpg" height="220px">
            </a>
            <div class="card-body pt-1 pb-1">
              <h5 contenteditable="true" class="">荣昌区-学院路-万隆小区-整套房子出租-离学校非常近！</h5>
              <i class="fa fa-jpy d-inline" aria-hidden="true"> 300/月（可砍价）</i>
              <div class="align-items-center d-flex mb-1" style=""><button type="button" class="fa bg-secondary mr-5 mt-2 py-1 px-1"> Know more</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; <button type="button" class="fa fa-star-o py-1 px-2 bg-secondary ml-4 mt-2"></button>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-4 p-3" style="">
          <div class="card box-shadow"> <a data-toggle="modal" data-target=".white">
              <img class="card-img-top" src="../img/living-room-10.jpg" height="220px">
            </a>
            <div class="card-body pt-1 pb-1">
              <h5 contenteditable="true" class="">荣昌区-学院路-万隆小区-整套房子出租-离学校非常近！</h5>
              <i class="fa fa-jpy d-inline" aria-hidden="true"> 300/月（可砍价）</i>
              <div class="align-items-center d-flex mb-1" style=""><button type="button" class="fa bg-secondary mr-5 mt-2 py-1 px-1"> Know more</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; <button type="button" class="fa fa-star-o py-1 px-2 bg-secondary ml-4 mt-2"></button>
              </div>
            </div>
          </div>
        </div>
<div class="col-md-4 p-3" style="">
          <div class="card box-shadow"> <a data-toggle="modal" data-target=".white">
              <img class="card-img-top" src="../img/living-room-11.jpg" height="220px">
            </a>
            <div class="card-body pt-1 pb-1">
              <h5 contenteditable="true" class="">荣昌区-学院路-万隆小区-整套房子出租-离学校非常近！</h5>
              <i class="fa fa-jpy d-inline" aria-hidden="true"> 300/月（可砍价）</i>
              <div class="align-items-center d-flex mb-1" style=""><button type="button" class="fa bg-secondary mr-5 mt-2 py-1 px-1"> Know more</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; <button type="button" class="fa fa-star-o py-1 px-2 bg-secondary ml-4 mt-2"></button>
              </div>
            </div>
          </div>
        </div>
<div class="col-md-4 p-3" style="">
          <div class="card box-shadow"> <a data-toggle="modal" data-target=".white">
              <img class="card-img-top" src="../img/living-room-1.jpg" height="220px">
            </a>
            <div class="card-body pt-1 pb-1">
              <h5 contenteditable="true" class="">荣昌区-学院路-万隆小区-整套房子出租-离学校非常近！</h5>
              <i class="fa fa-jpy d-inline" aria-hidden="true"> 300/月（可砍价）</i>
              <div class="align-items-center d-flex mb-1" style=""><button type="button" class="fa bg-secondary mr-5 mt-2 py-1 px-1"> Know more</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; <button type="button" class="fa fa-star-o py-1 px-2 bg-secondary ml-4 mt-2"></button>
              </div>
            </div>
          </div>
        </div>
      <div class="">
        <div class="container">
          <div class="row">
            <div class="col-md-3" style="left:38%">
              <ul class="pagination mt-3">
                <li class="page-item"> <a class="page-link" href="#"> <span>«</span></a> </li>
                <li class="page-item active"> <a class="page-link" href="#">1</a> </li>
                <li class="page-item"> <a class="page-link" href="#">2</a> </li>
                <li class="page-item"> <a class="page-link" href="#">3</a> </li>
                <li class="page-item"> <a class="page-link" href="#">4</a> </li>
                <li class="page-item"> <a class="page-link" href="#"> <span>»</span></a> </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      <div class="container" style="margin-top:150px">
        <div class="row">
          <div class="col-md-12 text-center pb-0" style=""><a class="">
              <p class="mb-1 h6 text-muted">© 2018-2019 发际线保卫队</p>
            </a>
            <ul class="list-inline text-muted"><a>
              </a>
              <li class="list-inline-item text-white"><a>
                </a><a href="#" class="text-info h6">Privacy</a>
              </li>
              <li class="list-inline-item">
                <a href="#" class="text-info h6">Terms</a>
              </li>
              <li class="list-inline-item">
                <a href="#" class="text-info h6">Support</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <a data-toggle="modal" data-target=".white" href="">
      </a>
    </div><a data-toggle="modal" data-target=".white" href="">
    </a>
  </div><a data-toggle="modal" data-target=".white" href="">
  </a>
  <footer class="text-muted"><a data-toggle="modal" data-target=".white" href="">
    </a>
    <div class="modal fade white ">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header bg-light">
            <h5 class="modal-title"><b>White</b> - Consultant</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">×</span> </button>
          </div>
          <div class="modal-body bg-light w-100 h-50">
            <div class="row">
              <div class="col-md-12">
                <div class="carousel slide mx-2" data-ride="carousel" id="carousel">
                  <div class="carousel-inner">
                    <div class="carousel-item active"> <img class="d-block img-fluid w-100" src="https://static.pingendo.com/cover-bubble-dark.svg">
                    </div>
                    <div class="carousel-item"> <img class="d-block img-fluid w-100" src="https://static.pingendo.com/cover-bubble-light.svg">
                    </div>
                    <div class="carousel-item"> <img class="d-block img-fluid w-100" src="https://static.pingendo.com/cover-moon.svg">
                    </div>
                  </div> <a class="carousel-control-prev" href="#carousel" role="button" data-slide="prev"> <span class="carousel-control-prev-icon"></span> <span class="sr-only">Previous</span> </a> <a class="carousel-control-next" href="#carousel" role="button" data-slide="next"> <span class="carousel-control-next-icon"></span> <span class="sr-only">Next</span> </a>
                </div>
              </div>
            </div>
            <div class="container h-50">
              <div class="row h-75">
                <div class="col-md-12 col-lg-12 mt-1" style="">
                  <div class="row">
                  </div>
                  <div class="card text-center">
                    <div class="card-header" style="">
                      <ul class="nav nav-tabs card-header-tabs">
                        <li class="nav-item">
                          <a class="nav-link active show" data-toggle="tab" data-target="#tabone">Explicate</a>
                        </li>
                        <li class="nav-item">
                          <a class="nav-link" data-toggle="tab" data-target="#tabthree">Contact</a>
                        </li>
                        <li class="nav-item">
                          <a class="btn btn-primary px-3" href="#"><i class="fa fa-star fa-fw fa-1x py-1"></i></a>
                        </li>
                      </ul>
                    </div>
                    <div class="card-body h-75" style="">
                      <div class="tab-content mt-2">
                        <div class="tab-pane fade active show" id="tabone" role="tabpanel">
                          <p class="text-justify">这里我先假装我正在借助这个网站出租房子，我先要大概说明房子地点，能住几个人，房子的条件怎么样，有无无线，电视，空调，做饭的设施，需不需要和别人一起住以及大概的价格，这里大概的格式还没想好的</p>
                        </div>
                        <div class="tab-pane fade" id="tabthree" role="tabpanel">
                          <p class="">联系方式，弹出来的二维码，这样比较便利，做不到的话直接写微信号或者扣扣号也是很好的</p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </footer>
  <script src="https://cdn.staticfile.org/jquery/2.2.4/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
  <script src="https://cdn.staticfile.org/axios/0.18.0/axios.min.js"></script>
  <script type="text/javascript">
  //TO DO:点击收藏、取消收藏；将收藏的模块传至后端
 //-------------获当前登陆的用户id和收藏状态-----------------//
    $(document).ready(function(){ 
       var user_id;
       var house_collect_status;
       const urlModule1 = require('url1/*含有用户id信息的url*/');
       let params1 = urlModule1.parse(request.url, true).query;//解析数据获得Json对象
       let user_id = params1.user_id;//通过参数名称获得参数值
       // 为当前用户创建请求
        axios.get('qiju/house/index', {
            params: {
              user_id:user_id
    }
  })
        .then(function (response) {
            console.log(response);
            if(response.data.code === 1 ){
               //已经登录，对应服务端获取数据 
              const urlModule2 = require('url2/*含有收藏信息的url*/');
              let params2 = urlModule2.parse(request.url, true).query;//解析数据获得Json对象
              let house_collect_status = params2.house_collect_status;//通过参数名称获得参数值
            }
            else{
            alert("Ooh,请先登录再操作哦");
            //或者在前端加一个弹框model
             //此时不跳转，允许用户不登录查看，但不允许不登录进行收藏操作
          }
      })
      .catch(function (error) {
            console.log(error);
      });
  });

//-----------------------房源收藏----------------------//
$(".collect").click(function(){
        if (user_id == null) {
            //alert("Ooh,请先登录再操作哦");
            //若用户未登录，不允许进行收藏操作，跳转至登录界面
             $("#failCollect").show();
             setTimeout(function(){
               $("#failCollect").hide();
               },1000);
             location.href = '../user/login.html';
        }else{
           if(house_collect_status == 0 ){
            //数据库中没有收藏,点击收藏操作
            $('.collect').removeClass('far').addClass('fas')
            //更新数据库收藏状态,变为已收藏
             axios.post('/qiju/house/index', {
              house_collect_status = 1,
              house_id = $(this).attr("id"),
              user_id = user_id
            })
            .then(function(response) {
              console.log(response);
              if(response.data.code === 1) alert('收藏成功');
              else alter('收藏失败');
            })
            .catch(function(error) {
              console.log(error);
            });
           }
           else{
            //数据库存在收藏,点击删除收藏操作
            $('.collect').removeClass('far').addClass('fas')
            //更新数据库收藏状态，变为未收藏
            axios.post('/qiju/house/index', {
              collect_status = 0,
              house_id = $(this).attr("id"),
              user_id = user_id
            })
            .then(function(response) {
              console.log(response);
            })
            .catch(function(error) {
              console.log(error);
            });
           }
        }
       });
  /*效果演示代码
   var isclick = 0;
   $(".isclick").click(function(){
      isclick++;
      if(isclick%2 == 0){
        $('.collect').removeClass('fas').addClass('far')
      }
      else{
        $('.collect').removeClass('far').addClass('fas')
      }
   });*/
  </script>

  <script type="text/javascript">
  //TO DO:搜索框通过关键字筛选房源

  </script>

  <script type="text/javascript">
  //TO DO:通过勾选复选框筛选房源(价格/地区)
  $(document).ready(function(){ 
    var array = new Array();
        $check_boxes.each(function(){
            var array_push = new Array();
            array_push.push($(this).val());
            array_push.push(2);
            array.push(array_push);
   var region = $('#region').prop('checked');//获取数组编码
   var price = $('#price').prop('checked');//获取数组编码
   if(region=='00'){
      

   }
 
  });
});
  </script>

  <script type="text/javascript">
  //TO DO:通过获取房屋出租状态下架房源，下面只写了一个对应的处理状态。下架房源不止一个，循环？
  $(document).ready(function(){ 
       var house_rent_status;
       var house_id;
       //对应服务端获取数据 
       if(house_rent_status == 1){
        //  $.post('qiju/house/index', function (data) {
        //     if(data.code === 1 ){
           
        //  })
         // 创建删除请求
        axios.post('qiju/house/index')
        .then(function (response) {
            console.log(response);
            if(response.data.code === 1 ){
               //从服务端获取数据house_id 
              let house_id = params4.house_id;//通过参数名称获得参数值
                  $('#house' + house_id + '').remove();
            }
            else{
            //如果删除失败了怎么办？即该下架的房源仍然在页面显示。
            //方案之一：在对应house显示模块上蒙上一层div显示下架
            //$('#house' + house_id + '').html(...);
          }
      })
      .catch(function (error) {
            console.log(error);
      });
    }else{
        //未租仍然显示，不作处理
    }
  });
  </script>
  </body>

</html>